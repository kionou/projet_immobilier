"use strict";(self["webpackChunkprojet_immobilier"]=self["webpackChunkprojet_immobilier"]||[]).push([[31],{8418:function(e,s,o){var l,n=o(2482),t=(o(7658),o(125)),a=o(6035);const i=(l=class{},(0,n.Z)(l,"InsertionAgent",(e=>(console.log("sqfQSD",{...e}),new Promise((async s=>{await(0,a.ET)(t.mk,e).then((e=>{console.log("ss",e),s({success:e})})).catch((e=>{console.log("eee",e),s({erreur:e})}))}))))),(0,n.Z)(l,"AfficherAgent",(()=>{let e=[];return new Promise((async s=>{await(0,a.PL)(t.mk).then((o=>{o.docs.length>0?o.forEach((o=>{let l=o.data();l.id=o.id,e.push(l),console.log("ssss",e),s({success:e})})):s({alert:"Aucun Agent inscri pour le moment !"})})).catch((e=>{console.log("eee",e),s({erreur:e})}))}))})),(0,n.Z)(l,"GetAgnetId",(e=>(console.log(e),new Promise((async s=>{const o=(0,a.JU)(t.mk,e);await(0,a.QT)(o).then((e=>{console.log("ss",e.data()),s({success:e.data()})})).catch((e=>{console.log("eee",e),s({erreur:e})}))}))))),(0,n.Z)(l,"DeleteAgent",(e=>(console.log("sqfQSD",e),new Promise((async s=>{await(0,a.oe)((0,a.JU)(t.mk,e)).then((e=>{console.log("ss",e),s({success:"supprimer avec success"})})).catch((e=>{console.log("eee",e),s({erreur:e})}))}))))),(0,n.Z)(l,"UpdateAgent",((e,s)=>(console.log("sqfQSD",e,s.image),console.log("sqfQdgsgsgSD",s.image),new Promise((async o=>{if(""===s.image){console.log("besion de image");const l=(0,a.JU)(t.mk,e);await(0,a.QT)(l).then((l=>{let n=l.data().image;s.image=n;const i=(0,a.JU)(t.mk,e);(0,a.pl)(i,s,{merge:!0}),console.log((0,a.pl)(i,s,{merge:!0})),o({success:l.data()})})).catch((e=>{console.log("eee",e),o({erreur:e})}))}else{const l=(0,a.JU)(t.mk,e);(0,a.pl)(l,s,{merge:!0}).then((e=>{console.log("ss",e),o({success:"reussis"})})).catch((e=>{console.log("eee",e),o({erreur:e})}))}}))))),l);s["Z"]=i},3168:function(e,s,o){o.d(s,{Z:function(){return g}});var l=o(3396),n=o(9242),t=o(7139);const a={class:"container"},i={class:"boutton"};function r(e,s,o,r,c,m){return(0,l.wg)(),(0,l.iD)("div",null,[o.toggle?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"modal-container",id:"modal",onClick:s[2]||(s[2]=(0,n.iM)(((...e)=>o.agentDelete&&o.agentDelete(...e)),["self"]))},[(0,l._)("div",a,[(0,l._)("p",null,(0,t.zw)(o.texte),1),(0,l._)("div",i,[(0,l._)("button",{onClick:s[0]||(s[0]=(...e)=>m.supp&&m.supp(...e))},"Oui"),(0,l._)("button",{onClick:s[1]||(s[1]=(...e)=>m.close&&m.close(...e))},"Non")])])])):(0,l.kq)("",!0)])}o(7658),o(8418);var c=o(3079),m={name:"DeleteBien",props:["toggle","agentDelete","Iddelete","texte"],methods:{async supp(){let e=await c.Z.DeleteUser(this.Iddelete);e.success&&this.$router.push("/login")},close(){this.toggle=!1,console.log("ddd")}}},u=o(89);const d=(0,u.Z)(m,[["render",r],["__scopeId","data-v-17a0d7ff"]]);var g=d},7031:function(e,s,o){o.r(s),o.d(s,{default:function(){return ie}});var l=o(3396);function n(e,s,o,n,t,a){const i=(0,l.up)("Spinner"),r=(0,l.up)("ComponentNavbar"),c=(0,l.up)("ComponentProfilUser");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(i),(0,l.Wm)(r),(0,l.Wm)(c,{id:o.id},null,8,["id"])])}var t=o(7139),a=o(9242);const i=e=>((0,l.dD)("data-v-c0e5b15e"),e=e(),(0,l.Cn)(),e),r={key:0,class:"loading"},c={key:1,class:"container"},m=i((()=>(0,l._)("div",{class:"images"},[(0,l._)("p",{class:"texte"},"profil")],-1))),u={class:"contenu"},d={class:"content"},g={class:"cadre-profil"},p={class:"profil-header"},h={class:"image"},v=["src"],f={class:"body"},_={class:"body-text"},w=i((()=>(0,l._)("i",{class:"fa-solid fa-user"},null,-1))),b={class:"body-text"},k=i((()=>(0,l._)("i",{class:"fa-solid fa-envelope"},null,-1))),y={class:"body-text"},D=i((()=>(0,l._)("i",{class:"fa-solid fa-phone"},null,-1))),$={class:"info"},U=i((()=>(0,l._)("h3",null,"Modifier les Informations",-1))),C={class:"tableau"},Z={key:0},A={class:"form-control"},x=i((()=>(0,l._)("label",{for:"nom"}," Nom",-1))),q={key:1},I={class:"form-control"},z=i((()=>(0,l._)("label",{for:"prenom"}," Prenom",-1))),P={key:2},N={class:"form-control"},S=i((()=>(0,l._)("label",{for:"email"}," Adresse Email",-1))),V={key:3},J={class:"form-control"},M=i((()=>(0,l._)("label",{for:"Numero"}," Numéro",-1))),Q={class:"dow"},T={class:"custom-file-upload"},E=i((()=>(0,l._)("i",{class:"fa fa-cloud-upload"},null,-1))),F=(0,l.Uk)(" Téléchargement personnalisé "),G={class:"boutton"},W=["disabled"];function B(e,s,o,n,i,B){const L=(0,l.up)("DeleteAgent"),j=(0,l.up)("ComponentLoading");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(L,{toggle:i.toggle,agentDelete:B.agentDelete,Iddelete:i.Iddelete,texte:i.texte},null,8,["toggle","agentDelete","Iddelete","texte"]),(0,l._)("div",null,[i.loading?((0,l.wg)(),(0,l.iD)("div",r,[(0,l.Wm)(j)])):((0,l.wg)(),(0,l.iD)("div",c,[m,(0,l._)("div",u,[(0,l._)("div",d,[(0,l._)("div",g,[(0,l._)("div",p,[(0,l._)("div",h,[(0,l._)("img",{src:i.users.image,alt:""},null,8,v)]),(0,l._)("div",f,[(0,l._)("div",_,[w,(0,l._)("p",null,(0,t.zw)(i.users.nom)+" "+(0,t.zw)(i.users.prenom),1)]),(0,l._)("div",b,[k,(0,l._)("p",null,(0,t.zw)(i.users.email),1)]),(0,l._)("div",y,[D,(0,l._)("p",null,(0,t.zw)(i.users.numero),1)])])])]),(0,l._)("div",$,[U,(0,l._)("div",C,[(0,l._)("form",null,[i.v$.nom.$error?((0,l.wg)(),(0,l.iD)("small",Z,(0,t.zw)(i.v$.nom.$errors[0].$message),1)):(0,l.kq)("",!0),(0,l._)("div",A,[x,(0,l.wy)((0,l._)("input",{type:"text",name:"nom","onUpdate:modelValue":s[0]||(s[0]=e=>i.nom=e)},null,512),[[a.nr,i.nom]])]),i.v$.prenom.$error?((0,l.wg)(),(0,l.iD)("small",q,(0,t.zw)(i.v$.prenom.$errors[0].$message),1)):(0,l.kq)("",!0),(0,l._)("div",I,[z,(0,l.wy)((0,l._)("input",{type:"text",name:"prenom","onUpdate:modelValue":s[1]||(s[1]=e=>i.prenom=e)},null,512),[[a.nr,i.prenom]])]),i.v$.email.$error?((0,l.wg)(),(0,l.iD)("small",P,(0,t.zw)(i.v$.email.$errors[0].$message),1)):(0,l.kq)("",!0),(0,l._)("div",N,[S,(0,l.wy)((0,l._)("input",{type:"email",name:"Adresse Email","onUpdate:modelValue":s[2]||(s[2]=e=>i.email=e)},null,512),[[a.nr,i.email]])]),i.v$.numero.$error?((0,l.wg)(),(0,l.iD)("small",V,(0,t.zw)(i.v$.numero.$errors[0].$message),1)):(0,l.kq)("",!0),(0,l._)("div",J,[M,(0,l.wy)((0,l._)("input",{input:"",type:"tel",name:"tel","onUpdate:modelValue":s[3]||(s[3]=e=>i.numero=e)},null,512),[[a.nr,i.numero]])]),(0,l._)("div",Q,[(0,l._)("label",T,[(0,l._)("input",{type:"file",onChange:s[4]||(s[4]=(...e)=>B.upload&&B.upload(...e)),ref:"input"},null,544),E,F])]),(0,l._)("div",G,[(0,l._)("button",{disabled:i.isActive,onClick:s[5]||(s[5]=(0,a.iM)(((...e)=>B.valider&&B.valider(...e)),["prevent"]))},"Modifier",8,W),(0,l._)("button",{class:"delete",onClick:s[6]||(s[6]=(0,a.iM)(((...e)=>B.agentDelete&&B.agentDelete(...e)),["prevent"]))},"Supprimer")])])])])])])]))])],64)}o(7658);var L=o(8712),j=o(3053),H=o(4188),O=o(3079),Y=o(125),K=o(1992),R=o(3168),X={components:{ComponentLoading:L.Z,DeleteAgent:R.Z},props:["id"],data(){return{loading:!0,isActive:!1,toggle:!1,nom:"",prenom:"",email:"",numero:"",image:"",v$:(0,j.ZP)(),users:"",agent:"",Iddelete:"",texte:"Voulez-vous supprimez votre compte?"}},validations:{nom:{require:H.pF,lgmin:(0,H.Ge)(4),lgmax:(0,H.Cn)(20)},prenom:{require:H.pF,lgmin:(0,H.Ge)(4),lgmax:(0,H.Cn)(20)},email:{require:H.pF,ValidEmail:H.hN},numero:{require:H.pF,ValidNumeri:H.zm,lgmin:(0,H.Ge)(10),lgmax:(0,H.Cn)(12)}},methods:{async valider(){if(this.v$.$touch(),0==this.v$.$errors.length){let e={nom:this.nom,prenom:this.prenom,email:this.email,numero:this.numero,image:this.image};console.log("gsdggf",e);let s=await O.Z.UpdateUser(this.id,e);s.success?this.$router.go():this.$router.push("/:pathMatch(.*)*")}},agentDelete(){console.log(this.id),this.toggle=!this.toggle,this.Iddelete=this.id},async upload(e){this.isActive=!0;let s=e.target.files[0];const o=(new Date).getTime()+s.name;console.log(o);const l=(0,K.iH)(Y.tO,s.name),n=(0,K.B0)(l,s);n.on("state_changed",(e=>{const s=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+s+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}}),(e=>{}),(()=>{(0,K.Jt)(n.snapshot.ref).then((e=>{e&&(this.isActive=!1),this.image=e,console.log("File available at",e)}))}))}},async mounted(){console.log(this.id);let e=await O.Z.GetUserId(this.id);console.log(e.success),e.success&&(this.users=e.success,this.nom=e.success.nom,this.prenom=e.success.prenom,this.email=e.success.email,this.numero=e.success.numero,this.password=e.success.password,this.loading=!1)}},ee=o(89);const se=(0,ee.Z)(X,[["render",B],["__scopeId","data-v-c0e5b15e"]]);var oe=se,le=o(6826),ne=o(44),te={name:"ProfilUser",props:["id"],components:{ComponentProfilUser:oe,ComponentNavbar:le.Z,Spinner:ne.Z}};const ae=(0,ee.Z)(te,[["render",n]]);var ie=ae}}]);
//# sourceMappingURL=31.69235ffc.js.map