"use strict";(self["webpackChunkprojet_immobilier"]=self["webpackChunkprojet_immobilier"]||[]).push([[561],{8418:function(e,o,s){var n,t=s(2482),a=(s(7658),s(125)),l=s(6035);const c=(n=class{},(0,t.Z)(n,"InsertionAgent",(e=>(console.log("sqfQSD",{...e}),new Promise((async o=>{await(0,l.ET)(a.mk,e).then((e=>{console.log("ss",e),o({success:e})})).catch((e=>{console.log("eee",e),o({erreur:e})}))}))))),(0,t.Z)(n,"AfficherAgent",(()=>{let e=[];return new Promise((async o=>{await(0,l.PL)(a.mk).then((s=>{s.docs.length>0?s.forEach((s=>{let n=s.data();n.id=s.id,e.push(n),console.log("ssss",e),o({success:e})})):o({alert:"Aucun Agent inscri pour le moment !"})})).catch((e=>{console.log("eee",e),o({erreur:e})}))}))})),(0,t.Z)(n,"GetAgnetId",(e=>new Promise((async o=>{const s=(0,l.JU)(a.mk,e);await(0,l.QT)(s).then((e=>{console.log("ss",e.data()),o({success:e.data()})})).catch((e=>{console.log("eee",e),o({erreur:e})}))})))),(0,t.Z)(n,"DeleteAgent",(e=>(console.log("sqfQSD",e),new Promise((async o=>{await(0,l.oe)((0,l.JU)(a.mk,e)).then((e=>{console.log("ss",e),o({success:"supprimer avec success"})})).catch((e=>{console.log("eee",e),o({erreur:e})}))}))))),(0,t.Z)(n,"UpdateAgent",((e,o)=>(console.log("sqfQSD",e,o.image),console.log("sqfQdgsgsgSD",o.image),new Promise((async s=>{if(""===o.image){console.log("besion de image");const n=(0,l.JU)(a.mk,e);await(0,l.QT)(n).then((n=>{let t=n.data().image;o.image=t;const c=(0,l.JU)(a.mk,e);(0,l.pl)(c,o,{merge:!0}),console.log((0,l.pl)(c,o,{merge:!0})),s({success:n.data()})})).catch((e=>{console.log("eee",e),s({erreur:e})}))}else{const n=(0,l.JU)(a.mk,e);(0,l.pl)(n,o,{merge:!0}).then((e=>{console.log("ss",e),s({success:"reussis"})})).catch((e=>{console.log("eee",e),s({erreur:e})}))}}))))),n);o["Z"]=c},2561:function(e,o,s){s.r(o),s.d(o,{default:function(){return C}});var n=s(3396);function t(e,o,s,t,a,l){const c=(0,n.up)("ComponentUpdateAgent");return(0,n.wg)(),(0,n.j4)(c,{id:s.id},null,8,["id"])}var a=s(9242);const l=e=>((0,n.dD)("data-v-1aadcbd8"),e=e(),(0,n.Cn)(),e),c={class:"modal-container"},r={class:"modal"},i=l((()=>(0,n._)("h1",null,"Modifier ",-1))),u={action:""},m=l((()=>(0,n._)("p",null,"dfs",-1))),d={class:"form_groupe"},p={class:"custom-file-upload"},g=l((()=>(0,n._)("i",{class:"fa fa-cloud-upload"},null,-1))),h=(0,n.Uk)(" Téléchargement personnalisé "),f={class:"boutton"};function w(e,o,s,t,l,w){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",c,[(0,n._)("div",r,[i,(0,n._)("form",u,[m,(0,n.wy)((0,n._)("input",{type:"text",placeholder:"Non","onUpdate:modelValue":o[0]||(o[0]=e=>l.nom=e)},null,512),[[a.nr,l.nom]]),(0,n.wy)((0,n._)("input",{type:"text",placeholder:"Prenom","onUpdate:modelValue":o[1]||(o[1]=e=>l.prenom=e)},null,512),[[a.nr,l.prenom]]),(0,n._)("div",d,[(0,n.wy)((0,n._)("input",{type:"email",placeholder:"Adresse Email","onUpdate:modelValue":o[2]||(o[2]=e=>l.email=e)},null,512),[[a.nr,l.email]]),(0,n.wy)((0,n._)("input",{type:"tel",placeholder:"Numero","onUpdate:modelValue":o[3]||(o[3]=e=>l.numero=e)},null,512),[[a.nr,l.numero]])]),(0,n._)("label",p,[(0,n._)("input",{type:"file",onChange:o[4]||(o[4]=(...e)=>w.upload&&w.upload(...e))},null,32),g,h]),(0,n._)("div",f,[(0,n._)("button",{onClick:o[5]||(o[5]=(0,a.iM)(((...e)=>w.valider&&w.valider(...e)),["prevent"]))},"Modifier")])])])])])}var _=s(8418),v=s(125),y=s(1992),U={name:"UpdateBien",props:["id"],data(){return{nom:"",prenom:"",email:"",numero:"",image:""}},methods:{async valider(){let e={nom:this.nom,prenom:this.prenom,email:this.email,numero:this.numero,image:this.image};console.log(e);let o=await _.Z.UpdateAgent(this.id,e);o.success?this.$router.go(-1):console.log("error 404")},async upload(e){let o=e.target.files[0];const s=(new Date).getTime()+o.name;console.log(s);const n=(0,y.iH)(v.tO,o.name),t=(0,y.B0)(n,o);t.on("state_changed",(e=>{const o=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+o+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}}),(e=>{}),(()=>{(0,y.Jt)(t.snapshot.ref).then((e=>{this.image=e,console.log("File available at",e)}))}))}},async mounted(){let e=await _.Z.GetAgnetId(this.id);console.log(e.success),e.success&&(this.nom=e.success.nom,this.prenom=e.success.prenom,this.email=e.success.email,this.numero=e.success.numero,this.password=e.success.password)}},k=s(89);const b=(0,k.Z)(U,[["render",w],["__scopeId","data-v-1aadcbd8"]]);var A=b,Z={props:["id"],name:"UpdateBien",components:{ComponentUpdateAgent:A}};const D=(0,k.Z)(Z,[["render",t]]);var C=D}}]);
//# sourceMappingURL=561.58db4ad3.js.map