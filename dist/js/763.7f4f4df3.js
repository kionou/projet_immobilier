"use strict";(self["webpackChunkprojet_immobilier"]=self["webpackChunkprojet_immobilier"]||[]).push([[763],{8418:function(e,s,o){var n,t=o(2482),l=(o(7658),o(125)),a=o(6035);const c=(n=class{},(0,t.Z)(n,"InsertionAgent",(e=>(console.log("sqfQSD",{...e}),new Promise((async s=>{await(0,a.ET)(l.mk,e).then((e=>{console.log("ss",e),s({success:e})})).catch((e=>{console.log("eee",e),s({erreur:e})}))}))))),(0,t.Z)(n,"AfficherAgent",(()=>{let e=[];return new Promise((async s=>{await(0,a.PL)(l.mk).then((o=>{o.docs.length>0?o.forEach((o=>{let n=o.data();n.id=o.id,e.push(n),console.log("ssss",e),s({success:e})})):s({alert:"Aucun Agent inscri pour le moment !"})})).catch((e=>{console.log("eee",e),s({erreur:e})}))}))})),(0,t.Z)(n,"GetAgnetId",(e=>new Promise((async s=>{const o=(0,a.JU)(l.mk,e);await(0,a.QT)(o).then((e=>{console.log("ss",e.data()),s({success:e.data()})})).catch((e=>{console.log("eee",e),s({erreur:e})}))})))),(0,t.Z)(n,"DeleteAgent",(e=>(console.log("sqfQSD",e),new Promise((async s=>{await(0,a.oe)((0,a.JU)(l.mk,e)).then((e=>{console.log("ss",e),s({success:"supprimer avec success"})})).catch((e=>{console.log("eee",e),s({erreur:e})}))}))))),(0,t.Z)(n,"UpdateAgent",((e,s)=>(console.log("sqfQSD",e,s.image),console.log("sqfQdgsgsgSD",s.image),new Promise((async o=>{if(""===s.image){console.log("besion de image");const n=(0,a.JU)(l.mk,e);await(0,a.QT)(n).then((n=>{let t=n.data().image;s.image=t;const c=(0,a.JU)(l.mk,e);(0,a.pl)(c,s,{merge:!0}),console.log((0,a.pl)(c,s,{merge:!0})),o({success:n.data()})})).catch((e=>{console.log("eee",e),o({erreur:e})}))}else{const n=(0,a.JU)(l.mk,e);(0,a.pl)(n,s,{merge:!0}).then((e=>{console.log("ss",e),o({success:"reussis"})})).catch((e=>{console.log("eee",e),o({erreur:e})}))}}))))),n);s["Z"]=c},9763:function(e,s,o){o.r(s),o.d(s,{default:function(){return P}});var n=o(3396);function t(e,s,o,t,l,a){const c=(0,n.up)("ComponentUpdateAgent");return(0,n.wg)(),(0,n.j4)(c,{id:o.id},null,8,["id"])}var l=o(9242);const a=e=>((0,n.dD)("data-v-b91eed70"),e=e(),(0,n.Cn)(),e),c={class:"modal-container"},i={class:"modal"},r=a((()=>(0,n._)("h1",null,"Modifier ",-1))),u={action:""},d=a((()=>(0,n._)("p",null,"dfs",-1))),m={class:"form_groupe"},p={class:"custom-file-upload"},g=a((()=>(0,n._)("i",{class:"fa fa-cloud-upload"},null,-1))),h=(0,n.Uk)(" Téléchargement personnalisé "),f={class:"boutton"},v=["disabled"];function w(e,s,o,t,a,w){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",c,[(0,n._)("div",i,[r,(0,n._)("form",u,[d,(0,n.wy)((0,n._)("input",{type:"text",placeholder:"Non","onUpdate:modelValue":s[0]||(s[0]=e=>a.nom=e)},null,512),[[l.nr,a.nom]]),(0,n.wy)((0,n._)("input",{type:"text",placeholder:"Prenom","onUpdate:modelValue":s[1]||(s[1]=e=>a.prenom=e)},null,512),[[l.nr,a.prenom]]),(0,n._)("div",m,[(0,n.wy)((0,n._)("input",{type:"email",placeholder:"Adresse Email","onUpdate:modelValue":s[2]||(s[2]=e=>a.email=e)},null,512),[[l.nr,a.email]]),(0,n.wy)((0,n._)("input",{type:"tel",placeholder:"Numero","onUpdate:modelValue":s[3]||(s[3]=e=>a.numero=e)},null,512),[[l.nr,a.numero]])]),(0,n._)("label",p,[(0,n._)("input",{type:"file",onChange:s[4]||(s[4]=(...e)=>w.upload&&w.upload(...e)),ref:"input"},null,544),g,h]),(0,n._)("div",f,[(0,n._)("button",{disabled:a.isActive,onClick:s[5]||(s[5]=(0,l.iM)(((...e)=>w.valider&&w.valider(...e)),["prevent"]))},"Modifier",8,v)])])])])])}var _=o(8418),y=o(125),U=o(1992),A={name:"UpdateBien",props:["id"],data(){return{isActive:!1,nom:"",prenom:"",email:"",numero:"",image:""}},methods:{async valider(){let e={nom:this.nom,prenom:this.prenom,email:this.email,numero:this.numero,image:this.image};console.log(e);let s=await _.Z.UpdateAgent(this.id,e);s.success?this.$router.go(-1):console.log("error 404")},async upload(e){let s=e.target.files[0];const o=(new Date).getTime()+s.name;console.log(o);const n=(0,U.iH)(y.tO,s.name),t=(0,U.B0)(n,s);t.on("state_changed",(e=>{const s=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+s+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}}),(e=>{}),(()=>{(0,U.Jt)(t.snapshot.ref).then((e=>{e&&(this.isActive=!1),this.image=e,console.log("File available at",e)}))}))}},async mounted(){let e=await _.Z.GetAgnetId(this.id);console.log(e.success),e.success&&(this.nom=e.success.nom,this.prenom=e.success.prenom,this.email=e.success.email,this.numero=e.success.numero,this.password=e.success.password),this.$refs.input.addEventListener("click",(()=>{this.isActive=!0}))}},b=o(89);const k=(0,b.Z)(A,[["render",w],["__scopeId","data-v-b91eed70"]]);var Z=k,D={props:["id"],name:"UpdateBien",components:{ComponentUpdateAgent:Z}};const C=(0,b.Z)(D,[["render",t]]);var P=C}}]);
//# sourceMappingURL=763.7f4f4df3.js.map