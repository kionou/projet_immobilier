"use strict";(self["webpackChunkprojet_immobilier"]=self["webpackChunkprojet_immobilier"]||[]).push([[989],{8418:function(e,s,o){var n,l=o(2482),a=(o(7658),o(125)),t=o(6035);const r=(n=class{},(0,l.Z)(n,"InsertionAgent",(e=>(console.log("sqfQSD",{...e}),new Promise((async s=>{await(0,t.ET)(a.mk,e).then((e=>{console.log("ss",e),s({success:e})})).catch((e=>{console.log("eee",e),s({erreur:e})}))}))))),(0,l.Z)(n,"AfficherAgent",(()=>{let e=[];return new Promise((async s=>{await(0,t.PL)(a.mk).then((o=>{o.docs.length>0?o.forEach((o=>{let n=o.data();n.id=o.id,e.push(n),console.log("ssss",e),s({success:e})})):s({alert:"Aucun Agent inscri pour le moment !"})})).catch((e=>{console.log("eee",e),s({erreur:e})}))}))})),(0,l.Z)(n,"GetAgnetId",(e=>(console.log(e),new Promise((async s=>{const o=(0,t.JU)(a.mk,e);await(0,t.QT)(o).then((e=>{console.log("ss",e.data()),s({success:e.data()})})).catch((e=>{console.log("eee",e),s({erreur:e})}))}))))),(0,l.Z)(n,"DeleteAgent",(e=>(console.log("sqfQSD",e),new Promise((async s=>{await(0,t.oe)((0,t.JU)(a.mk,e)).then((e=>{console.log("ss",e),s({success:"supprimer avec success"})})).catch((e=>{console.log("eee",e),s({erreur:e})}))}))))),(0,l.Z)(n,"UpdateAgent",((e,s)=>(console.log("sqfQSD",e,s.image),console.log("sqfQdgsgsgSD",s.image),new Promise((async o=>{if(""===s.image){console.log("besion de image");const n=(0,t.JU)(a.mk,e);await(0,t.QT)(n).then((n=>{let l=n.data().image;s.image=l;const r=(0,t.JU)(a.mk,e);(0,t.pl)(r,s,{merge:!0}),console.log((0,t.pl)(r,s,{merge:!0})),o({success:n.data()})})).catch((e=>{console.log("eee",e),o({erreur:e})}))}else{const n=(0,t.JU)(a.mk,e);(0,t.pl)(n,s,{merge:!0}).then((e=>{console.log("ss",e),o({success:"reussis"})})).catch((e=>{console.log("eee",e),o({erreur:e})}))}}))))),n);s["Z"]=r},3989:function(e,s,o){o.r(s),o.d(s,{default:function(){return J}});var n=o(3396);function l(e,s,o,l,a,t){const r=(0,n.up)("ComponentUpdateAgent");return(0,n.wg)(),(0,n.j4)(r,{id:o.id},null,8,["id"])}var a=o(7139),t=o(9242);const r=e=>((0,n.dD)("data-v-3d2c19de"),e=e(),(0,n.Cn)(),e),i={class:"modal-container"},c={class:"modal"},m=r((()=>(0,n._)("h1",null,"Modifier ",-1))),u={class:"form_groupe"},d={key:0},g={key:1},p={class:"form_groupe"},h={key:0},v={key:1},w={class:"custom-file-upload"},f=r((()=>(0,n._)("i",{class:"fa fa-cloud-upload"},null,-1))),$=(0,n.Uk)(" Téléchargement personnalisé "),k={class:"boutton"},y=["disabled"];function _(e,s,o,l,r,_){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",i,[(0,n._)("div",c,[m,(0,n._)("form",null,[(0,n._)("div",u,[r.v$.nom.$error?((0,n.wg)(),(0,n.iD)("small",d,(0,a.zw)(r.v$.nom.$errors[0].$message),1)):(0,n.kq)("",!0),(0,n.wy)((0,n._)("input",{type:"text",placeholder:"Non","onUpdate:modelValue":s[0]||(s[0]=e=>r.nom=e)},null,512),[[t.nr,r.nom]]),r.v$.prenom.$error?((0,n.wg)(),(0,n.iD)("small",g,(0,a.zw)(r.v$.prenom.$errors[0].$message),1)):(0,n.kq)("",!0),(0,n.wy)((0,n._)("input",{type:"text",placeholder:"Prenom","onUpdate:modelValue":s[1]||(s[1]=e=>r.prenom=e)},null,512),[[t.nr,r.prenom]])]),(0,n._)("div",p,[r.v$.email.$error?((0,n.wg)(),(0,n.iD)("small",h,(0,a.zw)(r.v$.email.$errors[0].$message),1)):(0,n.kq)("",!0),(0,n.wy)((0,n._)("input",{type:"email",placeholder:"Adresse Email","onUpdate:modelValue":s[2]||(s[2]=e=>r.email=e)},null,512),[[t.nr,r.email]]),r.v$.numero.$error?((0,n.wg)(),(0,n.iD)("small",v,(0,a.zw)(r.v$.numero.$errors[0].$message),1)):(0,n.kq)("",!0),(0,n.wy)((0,n._)("input",{type:"tel",placeholder:"Numero","onUpdate:modelValue":s[3]||(s[3]=e=>r.numero=e)},null,512),[[t.nr,r.numero]])]),(0,n._)("label",w,[(0,n._)("input",{type:"file",onChange:s[4]||(s[4]=(...e)=>_.upload&&_.upload(...e)),ref:"input"},null,544),f,$]),(0,n._)("div",k,[(0,n._)("button",{disabled:r.isActive,onClick:s[5]||(s[5]=(0,t.iM)(((...e)=>_.valider&&_.valider(...e)),["prevent"]))},"Modifier",8,y)])])])])])}var U=o(8418),A=o(125),b=o(1992),q=o(3053),D=o(4188),C={name:"UpdateBien",props:["id"],data(){return{isActive:!1,nom:"",prenom:"",email:"",numero:"",image:"",v$:(0,q.ZP)()}},validations:{nom:{require:D.pF,lgmin:(0,D.Ge)(4),lgmax:(0,D.Cn)(20)},prenom:{require:D.pF,lgmin:(0,D.Ge)(4),lgmax:(0,D.Cn)(20)},email:{require:D.pF,ValidEmail:D.hN},numero:{require:D.pF,ValidNumeri:D.zm,lgmin:(0,D.Ge)(10),lgmax:(0,D.Cn)(12)},password:{require:D.pF,lgmin:(0,D.Ge)(6),lgmax:(0,D.Cn)(12)}},methods:{async valider(){if(this.loading=!0,this.v$.$touch(),0==this.v$.$errors.length){let e={nom:this.nom,prenom:this.prenom,email:this.email,numero:this.numero,image:this.image};console.log(e);let s=await U.Z.UpdateAgent(this.id,e);s.success?this.$router.go(-1):console.log("error 404")}},async upload(e){let s=e.target.files[0];const o=(new Date).getTime()+s.name;console.log(o);const n=(0,b.iH)(A.tO,s.name),l=(0,b.B0)(n,s);l.on("state_changed",(e=>{const s=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+s+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}}),(e=>{}),(()=>{(0,b.Jt)(l.snapshot.ref).then((e=>{e&&(this.isActive=!1),this.image=e,console.log("File available at",e)}))}))}},async mounted(){console.log(this.id);let e=await U.Z.GetAgnetId(this.id);console.log(e.success),e.success&&(this.nom=e.success.nom,this.prenom=e.success.prenom,this.email=e.success.email,this.numero=e.success.numero,this.password=e.success.password),this.$refs.input.addEventListener("click",(()=>{this.isActive=!0}))}},Z=o(89);const P=(0,Z.Z)(C,[["render",_],["__scopeId","data-v-3d2c19de"]]);var x=P,F={props:["id"],name:"UpdateBien",components:{ComponentUpdateAgent:x}};const G=(0,Z.Z)(F,[["render",l]]);var J=G}}]);
//# sourceMappingURL=989.cacb3452.js.map